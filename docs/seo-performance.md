# SEO & Performance Optimization Guide

This document provides an overview of the SEO and performance optimization features implemented in the SenseBy CBD website.

## Table of Contents

1. [Structured Data](#structured-data)
2. [XML Sitemaps](#xml-sitemaps)
3. [Image Optimization](#image-optimization)
4. [Performance Monitoring](#performance-monitoring)
5. [Lighthouse Audits](#lighthouse-audits)

## Structured Data

Structured data (JSON-LD) has been implemented for product pages to improve search engine understanding and enable rich snippets in search results.

### Implementation

- `ProductSchema.tsx` component in `lib/schema/` generates JSON-LD markup for products
- Includes product information, pricing, availability, and breadcrumbs
- Automatically added to product detail pages

### Usage

The ProductSchema component is already integrated into product detail pages. To use it on other pages:

```tsx
import { ProductSchema } from '../../lib/schema/ProductSchema';

// In your component
return (
  <>
    <ProductSchema product={product} reviews={reviews} />
    {/* Rest of your component */}
  </>
);
```

## XML Sitemaps

XML sitemaps with hreflang tags have been implemented to improve search engine crawling and indexing, especially for multilingual content.

### Implementation

- Uses `next-sitemap` for static sitemap generation
- Dynamic sitemap generation via API route for products and categories
- Includes hreflang tags for all supported languages (en, nl, de, fr)

### Configuration

The sitemap configuration is in `next-sitemap.config.js`. Key settings:

- `siteUrl`: The base URL of the website
- `generateRobotsTxt`: Whether to generate a robots.txt file
- `exclude`: Paths to exclude from the sitemap
- `alternateRefs`: Default alternate language references

### Dynamic Sitemaps

The dynamic sitemap is generated by the API route at `pages/api/server-sitemap.xml.ts`. This ensures that new products and categories are included in the sitemap without requiring a rebuild.

## Image Optimization

Images are optimized for performance and user experience.

### Implementation

- Uses Next.js Image component with optimized configuration
- LazyImage component for lazy loading images
- Blur placeholders for better loading experience

### Usage

```tsx
import { LazyImage } from '../../components/ui/LazyImage';

// In your component
<LazyImage
  src={imageUrl}
  alt="Image description"
  width={800}
  height={600}
  useBlur={true}
  threshold={0.1}
  rootMargin="100px"
/>
```

### Configuration

The image optimization configuration is in `next.config.js`:

```js
images: {
  remotePatterns: [
    {
      protocol: 'https',
      hostname: 'images.unsplash.com',
      pathname: '/**',
    },
    {
      protocol: 'https',
      hostname: '*.supabase.co',
      pathname: '/storage/v1/object/public/**',
    },
  ],
  formats: ['image/avif', 'image/webp'],
  deviceSizes: [640, 750, 828, 1080, 1200, 1920, 2048, 3840],
  imageSizes: [16, 32, 48, 64, 96, 128, 256, 384],
},
```

## Performance Monitoring

Web Vitals tracking has been implemented to monitor performance in production.

### Implementation

- Uses `web-vitals` library to track Core Web Vitals
- Sends data to an API endpoint for storage and analysis
- Integrated into `_app.tsx`

### Configuration

The performance monitoring configuration is in `lib/utils/analytics.ts`. You can customize the reporting function to send data to your preferred analytics service.

## Lighthouse Audits

A Lighthouse audit script has been added to help identify and fix performance, accessibility, SEO, and best practices issues.

### Usage

```bash
# Run Lighthouse audit on desktop
npm run lighthouse

# Run Lighthouse audit on mobile
npm run lighthouse:mobile

# Run both desktop and mobile audits
npm run lighthouse:all

# Run audit on a specific URL
npm run lighthouse http://localhost:3000/products

# Run audit with specific categories
npm run lighthouse -- --only-categories=performance,accessibility
```

### Reports

Lighthouse reports are saved in the `lighthouse-reports` directory. The filename includes the URL, device type, and timestamp.

## Best Practices

- Use the SEO component on all pages with appropriate title, description, and keywords
- Use the ProductSchema component on all product pages
- Use the LazyImage component for images below the fold
- Run Lighthouse audits regularly to identify and fix issues
- Monitor Web Vitals in production to ensure good user experience
